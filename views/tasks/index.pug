extends /layouts/application.pug

block define
  - const section = 'tasks';
  - const pageTitle = 'Задания';

block content
  //- параметры
  //-   tasks
  //-   pages: { pageCount, pageSize, currentPage, recordCount }
  +title(pageTitle)
  table.table.border-left.border-right.table-hover.shadow-sm
    thead.thead-light.thead-sticky
      tr
        th(style='width: 5%') №
        th(style='width: 25%') Задание
        th(style='width: 15%') Срок
        th(style='width: 15%') Статус
        th(style='width: 20%') Исполнитель
        th(style='width: 20%') Теги
    tbody.bg-white
      - const startFrom = (pages.currentPage - 1) * pages.pageSize + 1;
      - var n = startFrom;
      each task in tasks
        tr
          td= n++
          td
            a(href= urlFor('showTask', task.id))= task.name
          td= task.formattedDateTo
          td
            //-.badge.badge-lg(class= `badge-${task.status.color}`)
            span.rounded.pl-2.pr-2.pb-1.pt-1(class= `alert-${task.status.color}`)
              = task.status.name
          td= task.executor.fullName
          td
          //-  each tag in tasks.tags
          //-    span= tag
      if n === startFrom
        tr
          td(colspan='6') Нет данных
  if pages.pageCount > 1
    +pagination({ url: urlFor('tasks'), pages })
